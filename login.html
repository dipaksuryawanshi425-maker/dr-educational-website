
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Email OTP Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

  <style>
    body{
      font-family: Arial, sans-serif;
      background:#f4f6f8;
      display:flex;
      justify-content:center;
      align-items:center;
      height:100vh;
      margin:0;
    }
    .box{
      background:#fff;
      padding:20px;
      width:100%;
      max-width:360px;
      border-radius:10px;
      box-shadow:0 0 12px rgba(0,0,0,0.12);
    }
    h2{margin-top:0;text-align:center}
    input,button{
      width:100%;
      padding:10px;
      margin-top:10px;
      font-size:16px;
    }
    button{
      background:#2563eb;
      color:#fff;
      border:none;
      border-radius:5px;
      cursor:pointer;
      font-weight:700;
    }
  </style>
</head>

<body>

<div class="box">
  <h2>Email OTP Login</h2>

  <input type="email" id="email" placeholder="Enter your email">
  <button onclick="sendOTP()">Send OTP</button>

  <input type="text" id="otp" placeholder="Enter OTP">
  <button onclick="verifyOTP()">Verify & Login</button>
</div>

<script>
  /* ========= EmailJS INIT ========= */
  emailjs.init("i8go6mBB1bEylAo0a"); // Public Key

  let generatedOTP = null;

  /* ========= SEND OTP ========= */
  function sendOTP(){
    const email = document.getElementById("email").value.trim();

    if(!email){
      alert("Please enter a valid email");
      return;
    }

    generatedOTP = Math.floor(100000 + Math.random() * 900000);

    emailjs.send(
      "service_l8m2t2c",      // Service ID
      "template_bzn83lx",     // Template ID
      {
        email: email,         // {{email}}
        otp: generatedOTP     // {{otp}}
      }
    ).then(() => {
      alert("OTP sent to your email ‚úÖ");
    }, (error) => {
      alert("Failed to send OTP ‚ùå");
      console.log(error);
    });
  }

  /* ========= VERIFY OTP ========= */
  function verifyOTP(){
    const otp = document.getElementById("otp").value.trim();

    if(otp == generatedOTP){
      // üîê LOGIN FLAG SET
      sessionStorage.setItem("loggedIn", "true");

      // ‚úÖ REDIRECT TO INDEX
      window.location.href = "index.html";
    }else{
      alert("Wrong OTP ‚ùå");
    }
  }
</script>

</body>
</html>
